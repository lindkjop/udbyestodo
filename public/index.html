<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="udbyesTodo">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Udbyes gate</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
	<style>
		html 					{ overflow-y:scroll; }
		body 					{ padding-top:50px; }
		#todo-list 				{ margin-bottom:30px; }
		#todo-form 	 			{ margin-bottom:50px; }
	</style>

	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script><!-- load angular -->
	
	<script src="js/controllers/main.js"></script>
	<script src="js/services/todolists.js"></script>
	<script src="js/core.js"></script>
	

</head>

<body ng-controller="mainController">

	<div class="container" name="newtodolist">
		<div class="row">
		<!--Input form for creating new todolists - not working right now and should be changed to just a plus sign-->
			<!--This changes after what todolist was last tempered with. Making sense because todolist is changing. Is it possible to just bind one way?-->
			<div class="col-xs-11">
				<input type="text" ng-model= "newtodolist.title" class="form-control input-sm text-center" placeholder="Todolist title">
			</div>
			<div class="col-xs-1">
				<button type="submit" class="btn btn-default btn-sm" ng-click="createTodolist()">
					<i class="fa fa-plus"></i>
				</button>
			</div>
		</div>
	</div>
	<div class="container" name="todolist">
		<section class="panel panel-default" ng-repeat="todolist in todolists">
			<header class="panel-heading text-center">Index: {{$index + 1}}, {{todolist.title}}
				<button type="button" class="btn btn-default" aria-label="Delete todolist" ng-click="deleteTodolist(todolist._id)">
 					<i class="fa fa-minus"></i>
				</button>
			</header>
				
			<!--THE TODOLIST-->
			<div class="checkbox" ng-repeat="todo in todolist.todos">
				<label>
					<input type="checkbox" ng-click="deleteTodo(todolist._id, todo._id)"> {{todo.text}}
				</label>
			</div>

			<!--Form to create new todos, this field is to edit the specific todolist it is in. Not quite working, as the model seem to be the same for all input fields, although the right data is edited. Try to add a dynamically generated name for this field, todolist_0 etc. Try to add ng-form and use the formname.todos.text as model-->
				<div class="form-group">
					<input type="text" name="todotext" ng-model= "todolists[$index].text" class="form-control input-sm text-center" placeholder="New todo text">
					<button type="submit" class="btn btn-default btn-sm" ng-click="addTodo(todolist._id, $index)">Add new todo</button>
				</div>
		</section>
	</div>


</body>
</html>